<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Capzicum</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://js.puter.com/v2/"></script>
    <script
      src="https://unpkg.com/html5-qrcode"
      type="text/javascript"
    ></script>
  </head>
  <body>
    <main>
      <div class="title-row">
        <img src="icon.png" alt="Capzicum" class="logo" />
        <h1 style="font-family: Georgia, Garamond, serif; font-style: italic">
          Capzicum
        </h1>
      </div>
      <p class="tagline">Premium grocery brand quality in your shopping list</p>

      <div id="desktop-msg" class="desktop-only-msg">
        ğŸ“± Please open on a mobile phone to scan products.
      </div>

      <div id="mobile-tools" class="action-buttons">
        <button id="barcode-btn">ğŸ“¶ Scan Barcode (Fast)</button>
        <small class="hint-text">
          Focus takes 2-3s. Data from OpenFoodFacts API.
        </small>
        <div id="reader"></div>

        <button id="ocr-btn">ğŸ“¸ Scan Text (OCR)</button>
        <small class="hint-text">
          Uses AI to read text. Takes ~5-8 seconds.
        </small>
        <input
          type="file"
          id="camera-input"
          accept="image/*"
          capture="environment"
          style="display: none"
        />
      </div>

      <textarea
        id="ingredients"
        placeholder="Manually enter ingredients and hit Enter for insights, or use scanners above..."
      ></textarea>

      <div class="scan-row">
        <input type="text" id="product-name" placeholder="Product Name" />
        <button id="add-list-btn">ğŸ“ Add</button>
      </div>

      <div id="results"></div>

      <div class="shopping-list-container">
        <div class="list-header-row">
          <h3>My Shopping List</h3>
          <div class="list-actions">
            <button
              class="icon-btn"
              onclick="copyList()"
              title="Copy to Clipboard"
            >
              ğŸ“‹
            </button>
            <button
              class="icon-btn"
              onclick="downloadList()"
              title="Download as Text"
            >
              â¬‡ï¸
            </button>
          </div>
        </div>

        <small class="list-instruction">
          Enter item to be added to shopping list in Product Name box and hit
          Enter.
        </small>

        <div id="shopping-list-items"></div>
      </div>
    </main>

    <div id="disclaimer-template" style="display: none">
      <div class="full-disclaimer" id="fullDisclaimer">
        <p>
          Retailer policies change frequently. Results may be incomplete. Always
          verify with the retailer directly.
        </p>
        <p>
          CSPI is a nonprofit food safety advocacy org.
          <a
            href="https://www.cspinet.org/eating-healthy/chemical-cuisine"
            target="_blank"
            >Chemical Cuisine guide â†—</a
          >
        </p>
        <div class="policy-title">Retailer avoid lists:</div>
        <a
          class="policy-link"
          href="https://www.wholefoodsmarket.com/quality-standards/food-ingredient-standards"
          target="_blank"
        >
          <span class="num">1</span><span>Whole Foods</span
          ><span class="external-icon">â†—</span>
        </a>
        <a
          class="policy-link"
          href="https://www.safeway.com/lp/open-nature-natural.html/"
          target="_blank"
        >
          <span class="num">2</span><span>Safeway Open Nature</span
          ><span class="external-icon">â†—</span>
        </a>
        <a
          class="policy-link"
          href="https://www.kroger.com/b/simple-truth"
          target="_blank"
        >
          <span class="num">3</span><span>Kroger Simple Truth</span
          ><span class="external-icon">â†—</span>
        </a>
        <a
          class="policy-link"
          href="https://www.heb.com/static-page/select-ingredients"
          target="_blank"
        >
          <span class="num">4</span><span>HEB Select Ingredients</span
          ><span class="external-icon">â†—</span>
        </a>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
